<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>URL Shortner</h1>
        <form  id ="shorten-form">
            <div class="">
                <label for="url">Enter URL:</label>
                <input type="text" name="url" id="url" required>
            </div>

             <div class="">
                <label for="shortCode">Enter shortCode:</label>
                <input type="text" name="shortCode" id="shortCode" required>
            </div>
            <button type="submit">Shorten</button>
        </form>

        <h2>Shortened URLs</h2>
        <ul id="shortened-urls"></ul>
    </div>
    <script>
        document.getElementById('shorten-form').
addEventListener('submit', async(event)=>{
    event.preventDefault();
    
    const formData = new FormData(event.target);
    const url = formData.get("url")
    const shortCode=formData.get('shortCode')

    console.log(url,shortCode);
    try{
       const response =  await fetch("/shorten", {
        method : "POST",
        headers:{"Content-Type": "application/json"},
        body:{url,shortCode}
       })
       if(response.ok){
        alert("form submitted successfully")
       } else{
        const errorMessage = await response.text();
        alert(errorMessage)
       }
    }catch(error){
        console.log(error)

    }
})

    </script>
    
</body>
</html>